webpackJsonp([1],{CxDX:function(e,t){},YOyO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("Dd8w"),a=s.n(r),i=s("woOf"),c=s.n(i),n=s("//Fk"),o=s.n(n),l=s("mtWM"),u=s.n(l);function h(e,t){var s=c()({},{offset:t,format:"json",keyword:e,autoload:"true",count:10,cur_tab:1});return u.a.get("/api/search_content/",{params:s}).then(function(e){return o.a.resolve(e.data)})}var f={props:{placeholder:{type:String,default:"请输入搜索关键词"}},data:function(){return{query:""}},methods:{search:function(){this.$emit("search",this.query)},clear:function(){this.query=""},blur:function(){this.$refs.search.blur()},setQuery:function(e){this.query=e}},created:function(){var e,t,s,r=this;this.$watch("query",(e=function(e){r.$emit("query",e)},t=600,s=void 0,function(){for(var r=this,a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];s&&clearTimeout(s),s=setTimeout(function(){e.apply(r,i)},t)}))}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-box"},[s("i",{staticClass:"icon icon-search",on:{click:e.search}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"search",staticClass:"box",attrs:{placeholder:e.placeholder},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),s("i",{staticClass:"icon icon-cancel-circle",on:{click:e.clear}})])},staticRenderFns:[]};var d=s("VU/8")(f,v,!1,function(e){s("xaTW")},"data-v-7a3cba1c",null).exports,y=s("vDJJ"),p=s("qwAB"),m=s("NYxO"),_={props:{searchHistory:{type:Array,default:[]}},methods:a()({selectItem:function(e){this.$emit("select",e)},deleteOne:function(e){this.$emit("delete",e)}},Object(m.b)(["clearSearchHistory"]))},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.searchHistory.length,expression:"searchHistory.length"}],staticClass:"search-list"},[s("h1",{staticClass:"title"},[e._v("搜索历史：")]),e._v(" "),s("transition-group",{attrs:{name:"move",tag:"ul"}},e._l(e.searchHistory,function(t){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.length,expression:"item.length"}],key:t,staticClass:"search-item",on:{click:function(s){e.selectItem(t)}}},[s("span",[e._v(e._s(t))]),e._v(" "),s("span",{staticClass:"icon"},[s("i",{staticClass:"icon icon-close",on:{click:function(s){s.stopPropagation(),e.deleteOne(t)}}})])])})),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.searchHistory.length,expression:"searchHistory.length"}],staticClass:"clear",on:{click:e.clearSearchHistory}},[s("i",{staticClass:"icon icon-bin"}),e._v(" "),s("span",[e._v("清空全部记录")])])],1)},staticRenderFns:[]};var C=s("VU/8")(_,w,!1,function(e){s("CxDX")},"data-v-7b3a54a0",null).exports,g=s("nniE"),q={data:function(){return{hotKey:[],query:"",result:[],offset:0,pullup:!0,routerBack:"search",refreshDelay:100}},computed:a()({shortcut:function(){return this.hotKey.concat(this.searchHistory)}},Object(m.c)(["searchHistory"])),created:function(){this._getHotkey()},methods:a()({back:function(){this.$router.back()},addQuery:function(e){this.$refs.searchBox.setQuery(e)},onQueryChange:function(e){this.query=e},searchMore:function(){var e=this;this.offset+=10,h(this.query,this.offset).then(function(t){e.result=e.result.concat(t.data)}),this.$refs.tip.show()},selectNews:function(e){this.$router.push({path:"/search/"+e.group_id}),this.setNews(e)},_getHotkey:function(){var e=this;u.a.get("/api/getHotKey").then(function(e){return o.a.resolve(e.data)}).then(function(t){e.hotKey=t.data})},_search:function(){var e=this;this.offset=0,this.$refs.searchResult.scrollTo(0,0),h(this.query,this.offset).then(function(t){e.result=t.data,console.log(e.result)}),""!=this.query&&this.saveSearchHistory(this.query)}},Object(m.b)(["saveSearchHistory","deleteSearchHistory"]),Object(m.d)({setNews:"SET_NEWS"})),watch:{query:function(e){this._search()}},components:{SearchBox:d,NewsList:y.a,Scroll:p.a,SearchList:C,Tip:g.a}},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"slider"}},[s("div",{staticClass:"search"},[s("div",{staticClass:"header"},[s("i",{staticClass:"icon icon-arrow_lift",on:{click:e.back}}),e._v(" "),s("h1",{staticClass:"title"},[e._v("搜索")])]),e._v(" "),s("div",{staticClass:"search-wrapper"},[s("search-box",{ref:"searchBox",on:{query:e.onQueryChange,search:e._search}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.query,expression:"!query"}],staticClass:"shortcut-wrapper"},[s("scroll",{staticClass:"shoutcut",attrs:{data:e.shortcut,refreshDelay:e.refreshDelay}},[s("div",[s("div",{staticClass:"hot-key"},[s("h1",{staticClass:"title"},[e._v("热门搜索：")]),e._v(" "),s("ul",e._l(e.hotKey,function(t){return s("li",{staticClass:"item",on:{click:function(s){e.addQuery(t.title)}}},[s("span",[e._v(e._s(t.title))])])}))]),e._v(" "),s("div",{staticClass:"search-history"},[s("search-list",{attrs:{searchHistory:e.searchHistory},on:{select:e.addQuery,delete:e.deleteSearchHistory}})],1)])])],1),e._v(" "),s("scroll",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],ref:"searchResult",staticClass:"search-result",attrs:{data:e.result,pullup:e.pullup},on:{scrollToEnd:e.searchMore}},[s("news-list",{attrs:{allNews:e.result},on:{select:e.selectNews}})],1),e._v(" "),s("tip",{ref:"tip"},[s("p",[e._v("已为您加载更多搜索结果")])]),e._v(" "),s("router-view",{attrs:{routerBack:e.routerBack}})],1)])},staticRenderFns:[]};var k=s("VU/8")(q,b,!1,function(e){s("anmP")},"data-v-096b0883",null);t.default=k.exports},anmP:function(e,t){},xaTW:function(e,t){}});
//# sourceMappingURL=1.c3557482d666dfc543ac.js.map
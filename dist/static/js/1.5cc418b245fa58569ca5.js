webpackJsonp([1],{CxDX:function(e,t){},EarI:function(e,t){var r=1e3,s=60*r,n=60*s,o=24*n,a=365.25*o;function c(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var i,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*s;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?c(i=e,o,"day")||c(i,n,"hour")||c(i,s,"minute")||c(i,r,"second")||i+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=n)return Math.round(e/n)+"h";if(e>=s)return Math.round(e/s)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},"Fy0/":function(e,t,r){(function(s){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==s&&"env"in s&&(e=Object({NODE_ENV:"production"}).DEBUG),e}(t=e.exports=r("vmzn")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var s="color: "+this.color;e.splice(1,0,s,"color: inherit");var n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++n)}),e.splice(o,0,s)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}).call(t,r("W2nU"))},YOyO:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("Dd8w"),n=r.n(s),o=r("//Fk"),a=r.n(o),c=r("woOf"),i=r.n(c),u=r("mtWM"),l=r.n(u),h=r("hU7x"),f=r.n(h);function d(e,t,r){return e+=(e.indexOf("?")<0?"?":"&")+function(e){var t="";for(var r in e){var s=void 0!==e[r]?e[r]:"";t+="&"+r+"="+encodeURIComponent(s)}return t?t.substring(1):""}(t),new a.a(function(t,s){f()(e,r,function(e,r){e?s(e):t(r)})})}function p(e,t){var r=i()({},{offset:t,format:"json",keyword:e,autoload:"true",count:10,cur_tab:1});return l.a.get("/api/search_content/",{params:r}).then(function(e){return a.a.resolve(e.data)})}var m={props:{placeholder:{type:String,default:"请输入搜索关键词"}},data:function(){return{query:""}},methods:{search:function(){this.$emit("search",this.query)},clear:function(){this.query=""},blur:function(){this.$refs.search.blur()},setQuery:function(e){this.query=e}},created:function(){var e,t,r,s=this;this.$watch("query",(e=function(e){s.$emit("query",e)},t=600,r=void 0,function(){for(var s=this,n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];r&&clearTimeout(r),r=setTimeout(function(){e.apply(s,o)},t)}))}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-box"},[r("i",{staticClass:"icon icon-search",on:{click:e.search}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"search",staticClass:"box",attrs:{placeholder:e.placeholder},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),r("i",{staticClass:"icon icon-cancel-circle",on:{click:e.clear}})])},staticRenderFns:[]};var y=r("VU/8")(m,v,!1,function(e){r("xaTW")},"data-v-7a3cba1c",null).exports,g=r("vDJJ"),w=r("qwAB"),b=r("NYxO"),_={props:{searchHistory:{type:Array,default:[]}},methods:n()({selectItem:function(e){this.$emit("select",e)},deleteOne:function(e){this.$emit("delete",e)}},Object(b.b)(["clearSearchHistory"]))},C={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.searchHistory.length,expression:"searchHistory.length"}],staticClass:"search-list"},[r("h1",{staticClass:"title"},[e._v("搜索历史：")]),e._v(" "),r("transition-group",{attrs:{name:"move",tag:"ul"}},e._l(e.searchHistory,function(t){return r("li",{directives:[{name:"show",rawName:"v-show",value:t.length,expression:"item.length"}],key:t,staticClass:"search-item",on:{click:function(r){e.selectItem(t)}}},[r("span",[e._v(e._s(t))]),e._v(" "),r("span",{staticClass:"icon"},[r("i",{staticClass:"icon icon-close",on:{click:function(r){r.stopPropagation(),e.deleteOne(t)}}})])])})),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.searchHistory.length,expression:"searchHistory.length"}],staticClass:"clear",on:{click:e.clearSearchHistory}},[r("i",{staticClass:"icon icon-bin"}),e._v(" "),r("span",[e._v("清空全部记录")])])],1)},staticRenderFns:[]};var x=r("VU/8")(_,C,!1,function(e){r("CxDX")},"data-v-7b3a54a0",null).exports,k=r("nniE"),N={data:function(){return{hotKey:[],query:"",result:[],offset:0,pullup:!0,routerBack:"search",refreshDelay:100}},computed:n()({shortcut:function(){return this.hotKey.concat(this.searchHistory)}},Object(b.c)(["searchHistory"])),created:function(){this._getHotkey()},methods:n()({back:function(){this.$router.back()},addQuery:function(e){this.$refs.searchBox.setQuery(e)},onQueryChange:function(e){this.query=e},searchMore:function(){var e=this;this.offset+=10,p(this.query,this.offset).then(function(t){e.result=e.result.concat(t.data)}),this.$refs.tip.show()},selectNews:function(e){this.$router.push({path:"/search/"+e.group_id}),this.setNews(e)},_getHotkey:function(){var e=this;d("http://m.toutiao.com/baidu_top_words/").then(function(t){e.hotKey=t.data})},_search:function(){var e=this;this.offset=0,this.$refs.searchResult.scrollTo(0,0),p(this.query,this.offset).then(function(t){e.result=t.data,console.log(e.result)}),""!=this.query&&this.saveSearchHistory(this.query)}},Object(b.b)(["saveSearchHistory","deleteSearchHistory"]),Object(b.d)({setNews:"SET_NEWS"})),watch:{query:function(e){this._search()}},components:{SearchBox:y,NewsList:g.a,Scroll:w.a,SearchList:x,Tip:k.a}},q={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"slider"}},[r("div",{staticClass:"search"},[r("div",{staticClass:"header"},[r("i",{staticClass:"icon icon-arrow_lift",on:{click:e.back}}),e._v(" "),r("h1",{staticClass:"title"},[e._v("搜索")])]),e._v(" "),r("div",{staticClass:"search-wrapper"},[r("search-box",{ref:"searchBox",on:{query:e.onQueryChange,search:e._search}})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.query,expression:"!query"}],staticClass:"shortcut-wrapper"},[r("scroll",{staticClass:"shoutcut",attrs:{data:e.shortcut,refreshDelay:e.refreshDelay}},[r("div",[r("div",{staticClass:"hot-key"},[r("h1",{staticClass:"title"},[e._v("热门搜索：")]),e._v(" "),r("ul",e._l(e.hotKey,function(t){return r("li",{staticClass:"item",on:{click:function(r){e.addQuery(t.title)}}},[r("span",[e._v(e._s(t.title))])])}))]),e._v(" "),r("div",{staticClass:"search-history"},[r("search-list",{attrs:{searchHistory:e.searchHistory},on:{select:e.addQuery,delete:e.deleteSearchHistory}})],1)])])],1),e._v(" "),r("scroll",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],ref:"searchResult",staticClass:"search-result",attrs:{data:e.result,pullup:e.pullup},on:{scrollToEnd:e.searchMore}},[r("news-list",{attrs:{allNews:e.result},on:{select:e.selectNews}})],1),e._v(" "),r("tip",{ref:"tip"},[r("p",[e._v("已为您加载更多搜索结果")])]),e._v(" "),r("router-view",{attrs:{routerBack:e.routerBack}})],1)])},staticRenderFns:[]};var E=r("VU/8")(N,q,!1,function(e){r("anmP")},"data-v-096b0883",null);t.default=E.exports},anmP:function(e,t){},hU7x:function(e,t,r){var s=r("Fy0/")("jsonp");e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={});t||(t={});var a,c,i=t.prefix||"__jp",u=t.name||i+n++,l=t.param||"callback",h=null!=t.timeout?t.timeout:6e4,f=encodeURIComponent,d=document.getElementsByTagName("script")[0]||document.head;h&&(c=setTimeout(function(){p(),r&&r(new Error("Timeout"))},h));function p(){a.parentNode&&a.parentNode.removeChild(a),window[u]=o,c&&clearTimeout(c)}return window[u]=function(e){s("jsonp got",e),p(),r&&r(null,e)},e=(e+=(~e.indexOf("?")?"&":"?")+l+"="+f(u)).replace("?&","?"),s('jsonp req "%s"',e),(a=document.createElement("script")).src=e,d.parentNode.insertBefore(a,d),function(){window[u]&&p()}};var n=0;function o(){}},vmzn:function(e,t,r){var s;function n(e){function r(){if(r.enabled){var e=r,n=+new Date,o=n-(s||n);e.diff=o,e.prev=s,e.curr=n,s=n;for(var a=new Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var i=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(r,s){if("%%"===r)return r;i++;var n=t.formatters[s];if("function"==typeof n){var o=a[i];r=n.call(e,o),a.splice(i,1),i--}return r}),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,s=0;for(r in e)s=(s<<5)-s+e.charCodeAt(r),s|=0;return t.colors[Math.abs(s)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length,n=0;n<s;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,s;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r("EarI"),t.names=[],t.skips=[],t.formatters={}},xaTW:function(e,t){}});
//# sourceMappingURL=1.5cc418b245fa58569ca5.js.map
{"version":3,"sources":["webpack:///./src/api/search.js","webpack:///src/base/search-box/search-box.vue","webpack:///./src/common/js/util.js","webpack:///./src/base/search-box/search-box.vue?bd1a","webpack:///./src/base/search-box/search-box.vue","webpack:///src/base/search-list/search-list.vue","webpack:///./src/base/search-list/search-list.vue?9014","webpack:///./src/base/search-list/search-list.vue","webpack:///src/components/search/search.vue","webpack:///./src/components/search/search.vue?4155","webpack:///./src/components/search/search.vue"],"names":["search","query","offset","data","assign_default","format","keyword","autoload","count","cur_tab","axios_default","a","get","params","then","res","promise_default","resolve","search_box","props","placeholder","type","String","default","methods","this","$emit","clear","blur","$refs","setQuery","created","func","delay","timer","_this","$watch","newQuery","_len","arguments","length","args","Array","_key","clearTimeout","setTimeout","apply","search_box_search_box","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","directives","name","rawName","value","expression","ref","attrs","domProps","input","$event","target","composing","staticRenderFns","base_search_box_search_box","__webpack_require__","normalizeComponent","ssrContext","search_list","searchHistory","extends_default","selectItem","item","deleteOne","Object","vuex_esm","search_list_search_list","tag","_l","key","_s","stopPropagation","clearSearchHistory","base_search_list_search_list","search_list_normalizeComponent","search_search","hotKey","result","pullup","routerBack","refreshDelay","computed","shortcut","concat","_getHotkey","back","$router","addQuery","searchBox","onQueryChange","searchMore","tip","show","selectNews","push","path","group_id","setNews","_this2","_search","_this3","searchResult","scrollTo","console","log","saveSearchHistory","watch","components","SearchBox","NewsList","news_list","Scroll","scroll_scroll","SearchList","Tip","components_search_search","title","select","delete","deleteSearchHistory","scrollToEnd","allNews","search_Component","search_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/1.c3557482d666dfc543ac.js","sourcesContent":["import axios from 'axios'\r\n\r\nexport function getHotKey () {\r\n  const url = '/api/getHotKey'\r\n\r\n  return axios.get(url).then(res => {\r\n    return Promise.resolve(res.data)\r\n  })\r\n}\r\n\r\nexport function search (query, offset) {\r\n  const url = '/api/search_content/'\r\n\r\n  const data = Object.assign({}, {\r\n    offset: offset,\r\n    format: 'json',\r\n    keyword: query,\r\n    autoload: 'true',\r\n    count: 10,\r\n    cur_tab: 1\r\n  })\r\n\r\n  return axios.get(url, {\r\n    params: data\r\n  })\r\n    .then(res => {\r\n      return Promise.resolve(res.data)\r\n    })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/search.js","<template>\r\n    <div class=\"search-box\">\r\n        <i class=\"icon icon-search\" @click=\"search\"></i>\r\n        <input class=\"box\" ref=\"search\" :placeholder=\"placeholder\" v-model=\"query\"></input>\r\n        <i class=\"icon icon-cancel-circle\" @click=\"clear\"></i>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {debounce} from 'common/js/util'\r\n\r\n    export default {\r\n        props: {\r\n            placeholder: {\r\n                type: String,\r\n                default: '请输入搜索关键词'\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                query: ''\r\n            }\r\n        },\r\n        methods: {\r\n            search() {\r\n                this.$emit('search', this.query)\r\n            },\r\n            clear() {\r\n                this.query = ''\r\n            }, \r\n            blur() {\r\n                this.$refs.search.blur()\r\n            },\r\n            setQuery(query) {\r\n                this.query = query\r\n            }\r\n        },\r\n        created() {\r\n            // 限制刷新时间，减少请求次数\r\n            this.$watch('query', debounce((newQuery) => {\r\n                this.$emit('query', newQuery)\r\n            }, 600))\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n    @import \"~common/stylus/variable\"\r\n\r\n    .search-box\r\n        display flex\r\n        align-items center\r\n        width 100%\r\n        box-sizing border-box\r\n        height 40px\r\n        padding 6px 10px\r\n        .icon-search\r\n            font-size $font-size-title-l\r\n            color $color-background\r\n        .box\r\n            flex 1\r\n            margin 0 5px\r\n            height 100%\r\n            border-radius 6px\r\n            color $color-text\r\n            font-size $font-size-text\r\n            &::placeholder\r\n                color $color-desc\r\n        .icon-cancel-circle\r\n            font-size $font-size-title-l\r\n            color $color-background\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/search-box/search-box.vue","export function debounce (func, delay) {\r\n  let timer\r\n\r\n  return function (...args) {\r\n    if (timer) {\r\n      clearTimeout(timer)\r\n    }\r\n    timer = setTimeout(() => {\r\n      func.apply(this, args)\r\n    }, delay)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/util.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-box\"},[_c('i',{staticClass:\"icon icon-search\",on:{\"click\":_vm.search}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],ref:\"search\",staticClass:\"box\",attrs:{\"placeholder\":_vm.placeholder},domProps:{\"value\":(_vm.query)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.query=$event.target.value}}}),_vm._v(\" \"),_c('i',{staticClass:\"icon icon-cancel-circle\",on:{\"click\":_vm.clear}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7a3cba1c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/search-box/search-box.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7a3cba1c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search-box.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-box.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-box.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a3cba1c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search-box.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7a3cba1c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/search-box/search-box.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"search-list\" v-show=\"searchHistory.length\">\r\n        <h1 class=\"title\">搜索历史：</h1>\r\n        <transition-group name=\"move\" tag=\"ul\">\r\n            <li class=\"search-item\" v-for=\"item in searchHistory\" :key=\"item\" @click=\"selectItem(item)\" v-show=\"item.length\">\r\n                <span>{{item}}</span>\r\n                <span class=\"icon\">\r\n                    <i class=\"icon icon-close\" @click.stop=\"deleteOne(item)\"></i>\r\n                </span>\r\n            </li>\r\n        </transition-group>\r\n        <div class=\"clear\" @click=\"clearSearchHistory\" v-show=\"searchHistory.length\">\r\n            <i class=\"icon icon-bin\"></i>\r\n            <span>清空全部记录</span>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {mapActions} from 'vuex'\r\n\r\n    export default {\r\n        props: {\r\n            searchHistory: {\r\n                type: Array,\r\n                default: []\r\n            }\r\n        },\r\n        methods: {\r\n            selectItem(item) {\r\n                this.$emit('select', item)\r\n            },\r\n            deleteOne(item) {\r\n                this.$emit('delete', item)\r\n            },\r\n            ...mapActions([\r\n                'clearSearchHistory'\r\n            ])\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n    @import \"~common/stylus/variable\"\r\n    \r\n    .search-list\r\n        .title\r\n            margin-bottom 10px\r\n            text-align center\r\n            font-size $font-size-title\r\n        .search-item\r\n            height 30px\r\n            line-height 30px\r\n            font-size $font-size-text\r\n            &.move-enter-active, &.move-leave-active\r\n                transition all 0.3s\r\n            &.move-enter, &.move-leave-to\r\n                opacity 0\r\n                height 0\r\n            .icon\r\n                float right\r\n                height 25px\r\n                line-height 25px\r\n        .clear\r\n            margin-top 20px\r\n            padding-bottom 30px\r\n            text-align center\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/search-list/search-list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistory.length),expression:\"searchHistory.length\"}],staticClass:\"search-list\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"搜索历史：\")]),_vm._v(\" \"),_c('transition-group',{attrs:{\"name\":\"move\",\"tag\":\"ul\"}},_vm._l((_vm.searchHistory),function(item){return _c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.length),expression:\"item.length\"}],key:item,staticClass:\"search-item\",on:{\"click\":function($event){_vm.selectItem(item)}}},[_c('span',[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"icon icon-close\",on:{\"click\":function($event){$event.stopPropagation();_vm.deleteOne(item)}}})])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistory.length),expression:\"searchHistory.length\"}],staticClass:\"clear\",on:{\"click\":_vm.clearSearchHistory}},[_c('i',{staticClass:\"icon icon-bin\"}),_vm._v(\" \"),_c('span',[_vm._v(\"清空全部记录\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7b3a54a0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/search-list/search-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7b3a54a0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7b3a54a0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7b3a54a0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/search-list/search-list.vue\n// module id = null\n// module chunks = ","<template>\r\n    <transition name=\"slider\" >\r\n        <div class=\"search\">\r\n            <div class=\"header\">\r\n                <i class=\"icon icon-arrow_lift\" @click=\"back\"></i>\r\n                <h1 class=\"title\">搜索</h1>\r\n            </div>\r\n            <div class=\"search-wrapper\">\r\n                <search-box @query=\"onQueryChange\" @search=\"_search\" ref=\"searchBox\"></search-box>\r\n            </div>\r\n            <div class=\"shortcut-wrapper\" v-show=\"!query\">\r\n                <scroll class=\"shoutcut\" :data=\"shortcut\" :refreshDelay=\"refreshDelay\">\r\n                    <div>\r\n                        <div class=\"hot-key\">\r\n                            <h1 class=\"title\">热门搜索：</h1>\r\n                            <ul>\r\n                                <li class=\"item\" v-for=\"item in hotKey\" @click=\"addQuery(item.title)\">\r\n                                    <span>{{item.title}}</span>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <div class=\"search-history\">\r\n                            <search-list :searchHistory=\"searchHistory\" @select=\"addQuery\" @delete=\"deleteSearchHistory\"></search-list>\r\n                        </div>\r\n                    </div>\r\n                </scroll>\r\n            </div>\r\n            <scroll class=\"search-result\" ref=\"searchResult\" v-show=\"query\" :data=\"result\" :pullup=\"pullup\" @scrollToEnd=\"searchMore\">\r\n                <news-list :allNews=\"result\" @select=\"selectNews\"></news-list>\r\n            </scroll>\r\n            <tip ref=\"tip\">\r\n                <p>已为您加载更多搜索结果</p>\r\n            </tip>\r\n            <router-view :routerBack=\"routerBack\"></router-view>\r\n        </div>\r\n    </transition>\r\n</template>\r\n\r\n<script>\r\n    import {getHotKey} from 'api/search'\r\n    import {search} from 'api/search'\r\n    import SearchBox from 'base/search-box/search-box'\r\n    import NewsList from 'components/news-list/news-list'\r\n    import Scroll from 'base/scroll/scroll'\r\n    import SearchList from 'base/search-list/search-list'\r\n    import {mapGetters, mapActions, mapMutations} from 'vuex'\r\n    import Tip from 'base/tip/tip'\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                hotKey: [],\r\n                query: '',\r\n                result: [],\r\n                offset: 0,\r\n                pullup: true,\r\n                routerBack: 'search',\r\n                refreshDelay: 100\r\n            }\r\n        },\r\n        computed: {\r\n            shortcut() {\r\n                return this.hotKey.concat(this.searchHistory)\r\n            },\r\n            ...mapGetters([\r\n                'searchHistory'\r\n            ])\r\n        },\r\n        created() {\r\n            this._getHotkey()\r\n        },\r\n        methods: {\r\n            back() {\r\n                this.$router.back()\r\n            },\r\n            addQuery(query) {\r\n                this.$refs.searchBox.setQuery(query)\r\n            },\r\n            onQueryChange(newQuery) {\r\n                this.query = newQuery\r\n            },\r\n            searchMore() {\r\n                this.offset += 10 \r\n                search(this.query, this.offset).then((res) => {\r\n                    this.result = this.result.concat(res.data)\r\n                })\r\n                this.$refs.tip.show()\r\n            },\r\n            selectNews(item) {\r\n                this.$router.push({\r\n                    path: `/search/${item.group_id}`\r\n                })\r\n                this.setNews(item)\r\n            },\r\n            _getHotkey() {\r\n                getHotKey().then((res) => {\r\n                    this.hotKey = res.data\r\n                })\r\n            },\r\n            _search() {\r\n                this.offset = 0\r\n                this.$refs.searchResult.scrollTo(0, 0)\r\n                search(this.query, this.offset).then((res) => {\r\n                    this.result = res.data\r\n                    console.log(this.result)\r\n                })\r\n                if (this.query == '') {\r\n                    return\r\n                }\r\n                this.saveSearchHistory(this.query)\r\n            },\r\n            ...mapActions([\r\n                'saveSearchHistory',\r\n                'deleteSearchHistory'\r\n            ]),\r\n            ...mapMutations({\r\n                setNews: 'SET_NEWS'\r\n            })\r\n        },\r\n        watch: {\r\n            query(newQuery) {\r\n                this._search()\r\n            }\r\n        },\r\n        components: {\r\n            SearchBox,\r\n            NewsList,\r\n            Scroll,\r\n            SearchList,\r\n            Tip\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n    @import \"~common/stylus/variable\"\r\n\r\n        .slider-enter-active, .slider-leave-active\r\n            transition all 0.3s\r\n        .slider-enter, .slider-leave-to\r\n            transform translate3d(100%, 0, 0)\r\n        .search\r\n            position fixed\r\n            z-index 100\r\n            top 0\r\n            bottom 100px\r\n            left 0\r\n            right 0\r\n            background $color-title\r\n            .header\r\n                position relative\r\n                height 60px\r\n                line-height 60px\r\n                text-align center\r\n                background $color-background\r\n                color $color-title\r\n                .icon\r\n                    position absolute\r\n                    top 22px\r\n                    left 22px\r\n                    font-size $font-size-title\r\n                .title\r\n                    font-size $font-size-title-l\r\n            .search-wrapper\r\n                height 40px\r\n                line-height 40px\r\n                background $color-background-g\r\n            .shortcut-wrapper\r\n                position: fixed\r\n                top: 100px\r\n                bottom: 0\r\n                padding-top 20px\r\n                width: 100%\r\n                .shoutcut\r\n                    height 100%\r\n                    overflow hidden\r\n                    .hot-key\r\n                        margin 15px 7px\r\n                        text-align center\r\n                        .title\r\n                            margin-bottom 10px\r\n                            font-size $font-size-title\r\n                        .item\r\n                            display inline-block\r\n                            margin-right 6px\r\n                            margin-bottom 15px\r\n                            padding 6px 5px\r\n                            background $color-border\r\n                            font-size $font-size-text\r\n                    .search-history\r\n                        margin 0 25px\r\n            .search-result\r\n                height 100%\r\n                overflow hidden\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/search/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slider\"}},[_c('div',{staticClass:\"search\"},[_c('div',{staticClass:\"header\"},[_c('i',{staticClass:\"icon icon-arrow_lift\",on:{\"click\":_vm.back}}),_vm._v(\" \"),_c('h1',{staticClass:\"title\"},[_vm._v(\"搜索\")])]),_vm._v(\" \"),_c('div',{staticClass:\"search-wrapper\"},[_c('search-box',{ref:\"searchBox\",on:{\"query\":_vm.onQueryChange,\"search\":_vm._search}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.query),expression:\"!query\"}],staticClass:\"shortcut-wrapper\"},[_c('scroll',{staticClass:\"shoutcut\",attrs:{\"data\":_vm.shortcut,\"refreshDelay\":_vm.refreshDelay}},[_c('div',[_c('div',{staticClass:\"hot-key\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"热门搜索：\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.hotKey),function(item){return _c('li',{staticClass:\"item\",on:{\"click\":function($event){_vm.addQuery(item.title)}}},[_c('span',[_vm._v(_vm._s(item.title))])])}))]),_vm._v(\" \"),_c('div',{staticClass:\"search-history\"},[_c('search-list',{attrs:{\"searchHistory\":_vm.searchHistory},on:{\"select\":_vm.addQuery,\"delete\":_vm.deleteSearchHistory}})],1)])])],1),_vm._v(\" \"),_c('scroll',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],ref:\"searchResult\",staticClass:\"search-result\",attrs:{\"data\":_vm.result,\"pullup\":_vm.pullup},on:{\"scrollToEnd\":_vm.searchMore}},[_c('news-list',{attrs:{\"allNews\":_vm.result},on:{\"select\":_vm.selectNews}})],1),_vm._v(\" \"),_c('tip',{ref:\"tip\"},[_c('p',[_vm._v(\"已为您加载更多搜索结果\")])]),_vm._v(\" \"),_c('router-view',{attrs:{\"routerBack\":_vm.routerBack}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-096b0883\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/search/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-096b0883\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-096b0883\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-096b0883\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}